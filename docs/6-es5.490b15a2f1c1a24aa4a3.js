function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(l){r=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}return i}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _possibleConstructorReturn(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{NeKg:function(t,e,i){"use strict";i.r(e);var n,r=i("ofXK"),o=i("tyNb"),a=i("fXoL"),s=i("lJxs"),l=i("Wcq6"),c=i("aECQ"),h=i("S/Aq"),u=((n=function(){function t(e,i){_classCallCheck(this,t),this.afAuth=e,this.db=i}return _createClass(t,[{key:"createBoard",value:function(){return this.db.collection("boards").add({name:"Temporary Name",posts:null,created:new Date,expiry:new Date(999999999999999)})}},{key:"getBoard",value:function(t){return this.db.collection("boards").doc(t).valueChanges().pipe(Object(s.a)((function(e){return Object.assign({id:t},e)})))}},{key:"getBoards",value:function(){return this.db.collection("boards").valueChanges({idField:"id"})}},{key:"addPost",value:function(t){return this.db.collection("boards").doc(t.boardId).update({posts:l.firestore.FieldValue.arrayUnion(t)})}},{key:"updatePosts",value:function(t,e){return this.db.collection("boards").doc(t).update({posts:e})}}]),t}()).\u0275fac=function(t){return new(t||n)(a.Wb(c.a),a.Wb(h.a))},n.\u0275prov=a.Jb({token:n,factory:n.\u0275fac,providedIn:"root"}),n),d=i("9ans"),p=i("rDax"),_=i("+rOU"),f=i("FKr1"),g=i("cH1L"),v=i("XNiG"),b=i("NXyV"),m=i("LRne"),y=i("pLZG"),w=i("IzEk"),D=i("JX91"),C=i("R0Ic"),k=i("FtGj"),P=i("u47x");function S(t,e){}var x=function t(){_classCallCheck(this,t),this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus=!0,this.restoreFocus=!0,this.closeOnNavigation=!0},O={dialogContainer:Object(C.l)("dialogContainer",[Object(C.i)("void, exit",Object(C.j)({opacity:0,transform:"scale(0.7)"})),Object(C.i)("enter",Object(C.j)({transform:"none"})),Object(C.k)("* => enter",Object(C.e)("150ms cubic-bezier(0, 0, 0.2, 1)",Object(C.j)({transform:"none",opacity:1}))),Object(C.k)("* => void, * => exit",Object(C.e)("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",Object(C.j)({opacity:0})))])};function R(){throw Error("Attempting to attach dialog content after content is already attached")}var E,I,T,j,A=((E=function(t){function e(t,i,n,r,o){var s;return _classCallCheck(this,e),(s=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this)))._elementRef=t,s._focusTrapFactory=i,s._changeDetectorRef=n,s._config=o,s._elementFocusedBeforeDialogWasOpened=null,s._state="enter",s._animationStateChanged=new a.n,s.attachDomPortal=function(t){return s._portalOutlet.hasAttached()&&R(),s._savePreviouslyFocusedElement(),s._portalOutlet.attachDomPortal(t)},s._ariaLabelledBy=o.ariaLabelledBy||null,s._document=r,s}return _inherits(e,t),_createClass(e,[{key:"attachComponentPortal",value:function(t){return this._portalOutlet.hasAttached()&&R(),this._savePreviouslyFocusedElement(),this._portalOutlet.attachComponentPortal(t)}},{key:"attachTemplatePortal",value:function(t){return this._portalOutlet.hasAttached()&&R(),this._savePreviouslyFocusedElement(),this._portalOutlet.attachTemplatePortal(t)}},{key:"_trapFocus",value:function(){var t=this._elementRef.nativeElement;if(this._focusTrap||(this._focusTrap=this._focusTrapFactory.create(t)),this._config.autoFocus)this._focusTrap.focusInitialElementWhenReady();else{var e=this._document.activeElement;e===t||t.contains(e)||t.focus()}}},{key:"_restoreFocus",value:function(){var t=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&t&&"function"==typeof t.focus){var e=this._document.activeElement,i=this._elementRef.nativeElement;e&&e!==this._document.body&&e!==i&&!i.contains(e)||t.focus()}this._focusTrap&&this._focusTrap.destroy()}},{key:"_savePreviouslyFocusedElement",value:function(){var t=this;this._document&&(this._elementFocusedBeforeDialogWasOpened=this._document.activeElement,this._elementRef.nativeElement.focus&&Promise.resolve().then((function(){return t._elementRef.nativeElement.focus()})))}},{key:"_onAnimationDone",value:function(t){"enter"===t.toState?this._trapFocus():"exit"===t.toState&&this._restoreFocus(),this._animationStateChanged.emit(t)}},{key:"_onAnimationStart",value:function(t){this._animationStateChanged.emit(t)}},{key:"_startExitAnimation",value:function(){this._state="exit",this._changeDetectorRef.markForCheck()}}]),e}(_.a)).\u0275fac=function(t){return new(t||E)(a.Nb(a.l),a.Nb(P.c),a.Nb(a.h),a.Nb(r.d,8),a.Nb(x))},E.\u0275cmp=a.Hb({type:E,selectors:[["mat-dialog-container"]],viewQuery:function(t,e){var i;1&t&&a.oc(_.b,!0),2&t&&a.ic(i=a.bc())&&(e._portalOutlet=i.first)},hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(t,e){1&t&&a.Fb("@dialogContainer.start",(function(t){return e._onAnimationStart(t)}))("@dialogContainer.done",(function(t){return e._onAnimationDone(t)})),2&t&&(a.Db("id",e._id)("role",e._config.role)("aria-labelledby",e._config.ariaLabel?null:e._ariaLabelledBy)("aria-label",e._config.ariaLabel)("aria-describedby",e._config.ariaDescribedBy||null),a.vc("@dialogContainer",e._state))},features:[a.zb],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,e){1&t&&a.qc(0,S,0,0,"ng-template",0)},directives:[_.b],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[O.dialogContainer]}}),E),L=0,N=function(){function t(e,i){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"mat-dialog-".concat(L++);_classCallCheck(this,t),this._overlayRef=e,this._containerInstance=i,this.id=r,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new v.a,this._afterClosed=new v.a,this._beforeClosed=new v.a,this._state=0,i._id=r,i._animationStateChanged.pipe(Object(y.a)((function(t){return"done"===t.phaseName&&"enter"===t.toState})),Object(w.a)(1)).subscribe((function(){n._afterOpened.next(),n._afterOpened.complete()})),i._animationStateChanged.pipe(Object(y.a)((function(t){return"done"===t.phaseName&&"exit"===t.toState})),Object(w.a)(1)).subscribe((function(){clearTimeout(n._closeFallbackTimeout),n._overlayRef.dispose()})),e.detachments().subscribe((function(){n._beforeClosed.next(n._result),n._beforeClosed.complete(),n._afterClosed.next(n._result),n._afterClosed.complete(),n.componentInstance=null,n._overlayRef.dispose()})),e.keydownEvents().pipe(Object(y.a)((function(t){return t.keyCode===k.e&&!n.disableClose&&!Object(k.o)(t)}))).subscribe((function(t){t.preventDefault(),n.close()}))}return _createClass(t,[{key:"close",value:function(t){var e=this;this._result=t,this._containerInstance._animationStateChanged.pipe(Object(y.a)((function(t){return"start"===t.phaseName})),Object(w.a)(1)).subscribe((function(i){e._beforeClosed.next(t),e._beforeClosed.complete(),e._state=2,e._overlayRef.detachBackdrop(),e._closeFallbackTimeout=setTimeout((function(){e._overlayRef.dispose()}),i.totalTime+100)})),this._containerInstance._startExitAnimation(),this._state=1}},{key:"afterOpened",value:function(){return this._afterOpened.asObservable()}},{key:"afterClosed",value:function(){return this._afterClosed.asObservable()}},{key:"beforeClosed",value:function(){return this._beforeClosed.asObservable()}},{key:"backdropClick",value:function(){return this._overlayRef.backdropClick()}},{key:"keydownEvents",value:function(){return this._overlayRef.keydownEvents()}},{key:"updatePosition",value:function(t){var e=this._getPositionStrategy();return t&&(t.left||t.right)?t.left?e.left(t.left):e.right(t.right):e.centerHorizontally(),t&&(t.top||t.bottom)?t.top?e.top(t.top):e.bottom(t.bottom):e.centerVertically(),this._overlayRef.updatePosition(),this}},{key:"updateSize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this._getPositionStrategy().width(t).height(e),this._overlayRef.updatePosition(),this}},{key:"addPanelClass",value:function(t){return this._overlayRef.addPanelClass(t),this}},{key:"removePanelClass",value:function(t){return this._overlayRef.removePanelClass(t),this}},{key:"getState",value:function(){return this._state}},{key:"_getPositionStrategy",value:function(){return this._overlayRef.getConfig().positionStrategy}}]),t}(),F=new a.q("MatDialogData"),M=new a.q("mat-dialog-default-options"),W=new a.q("mat-dialog-scroll-strategy"),z={provide:W,deps:[p.a],useFactory:function(t){return function(){return t.scrollStrategies.block()}}},B=((T=function(){function t(e,i,n,r,o,a,s){var l=this;_classCallCheck(this,t),this._overlay=e,this._injector=i,this._defaultOptions=r,this._parentDialog=a,this._overlayContainer=s,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new v.a,this._afterOpenedAtThisLevel=new v.a,this._ariaHiddenElements=new Map,this.afterAllClosed=Object(b.a)((function(){return l.openDialogs.length?l._afterAllClosed:l._afterAllClosed.pipe(Object(D.a)(void 0))})),this._scrollStrategy=o}return _createClass(t,[{key:"open",value:function(t,e){var i=this;if((e=function(t,e){return Object.assign(Object.assign({},e),t)}(e,this._defaultOptions||new x)).id&&this.getDialogById(e.id))throw Error('Dialog with id "'.concat(e.id,'" exists already. The dialog id must be unique.'));var n=this._createOverlay(e),r=this._attachDialogContainer(n,e),o=this._attachDialogContent(t,r,n,e);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(o),o.afterClosed().subscribe((function(){return i._removeOpenDialog(o)})),this.afterOpened.next(o),o}},{key:"closeAll",value:function(){this._closeDialogs(this.openDialogs)}},{key:"getDialogById",value:function(t){return this.openDialogs.find((function(e){return e.id===t}))}},{key:"ngOnDestroy",value:function(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}},{key:"_createOverlay",value:function(t){var e=this._getOverlayConfig(t);return this._overlay.create(e)}},{key:"_getOverlayConfig",value:function(t){var e=new p.b({positionStrategy:this._overlay.position().global(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(e.backdropClass=t.backdropClass),e}},{key:"_attachDialogContainer",value:function(t,e){var i=new _.e(e&&e.viewContainerRef&&e.viewContainerRef.injector||this._injector,new WeakMap([[x,e]])),n=new _.c(A,e.viewContainerRef,i,e.componentFactoryResolver);return t.attach(n).instance}},{key:"_attachDialogContent",value:function(t,e,i,n){var r=new N(i,e,n.id);if(n.hasBackdrop&&i.backdropClick().subscribe((function(){r.disableClose||r.close()})),t instanceof a.L)e.attachTemplatePortal(new _.g(t,null,{$implicit:n.data,dialogRef:r}));else{var o=this._createInjector(n,r,e),s=e.attachComponentPortal(new _.c(t,n.viewContainerRef,o));r.componentInstance=s.instance}return r.updateSize(n.width,n.height).updatePosition(n.position),r}},{key:"_createInjector",value:function(t,e,i){var n=t&&t.viewContainerRef&&t.viewContainerRef.injector,r=new WeakMap([[A,i],[F,t.data],[N,e]]);return!t.direction||n&&n.get(g.b,null)||r.set(g.b,{value:t.direction,change:Object(m.a)()}),new _.e(n||this._injector,r)}},{key:"_removeOpenDialog",value:function(t){var e=this.openDialogs.indexOf(t);e>-1&&(this.openDialogs.splice(e,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((function(t,e){t?e.setAttribute("aria-hidden",t):e.removeAttribute("aria-hidden")})),this._ariaHiddenElements.clear(),this._afterAllClosed.next()))}},{key:"_hideNonDialogContentFromAssistiveTechnology",value:function(){var t=this._overlayContainer.getContainerElement();if(t.parentElement)for(var e=t.parentElement.children,i=e.length-1;i>-1;i--){var n=e[i];n===t||"SCRIPT"===n.nodeName||"STYLE"===n.nodeName||n.hasAttribute("aria-live")||(this._ariaHiddenElements.set(n,n.getAttribute("aria-hidden")),n.setAttribute("aria-hidden","true"))}}},{key:"_closeDialogs",value:function(t){for(var e=t.length;e--;)t[e].close()}},{key:"openDialogs",get:function(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}},{key:"afterOpened",get:function(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}},{key:"_afterAllClosed",get:function(){var t=this._parentDialog;return t?t._afterAllClosed:this._afterAllClosedAtThisLevel}}]),t}()).\u0275fac=function(t){return new(t||T)(a.Wb(p.a),a.Wb(a.r),a.Wb(r.g,8),a.Wb(M,8),a.Wb(W),a.Wb(T,12),a.Wb(p.c))},T.\u0275prov=a.Jb({token:T,factory:T.\u0275fac}),T),H=((I=function t(){_classCallCheck(this,t)}).\u0275mod=a.Lb({type:I}),I.\u0275inj=a.Kb({factory:function(t){return new(t||I)},providers:[B,z],imports:[[r.c,p.d,_.f,f.c],f.c]}),I),q=i("3Pt+"),G=i("kmnG"),Z=i("qFsG"),V=i("bTqV"),U=((j=function(){function t(e,i,n){_classCallCheck(this,t),this.fb=e,this.dialogRef=i,this.data=n}return _createClass(t,[{key:"ngOnInit",value:function(){this.form=this.fb.group({title:this.data.title||"",author:this.data.author||"",contents:this.data.contents||""})}},{key:"onSubmit",value:function(){this.dialogRef.close({title:this.title.value,author:this.author.value,contents:this.contents.value,boardId:this.data.boardId})}},{key:"onClose",value:function(){this.dialogRef.close()}},{key:"title",get:function(){return this.form.get("title")}},{key:"author",get:function(){return this.form.get("author")}},{key:"contents",get:function(){return this.form.get("contents")}}]),t}()).\u0275fac=function(t){return new(t||j)(a.Nb(q.b),a.Nb(N),a.Nb(F))},j.\u0275cmp=a.Hb({type:j,selectors:[["app-new-board-post"]],decls:11,vars:1,consts:[[3,"formGroup"],["matInput","","formControlName","title","placeholder","Title","autocomplete","off"],["matInput","","formControlName","author","placeholder","Your Name (Optional)","autocomplete","off"],["matInput","","matTextareaAutosize","","formControlName","contents","placeholder","Write Your Post...","autocomplete","off"],["mat-raised-button","","type","submit","color","primary",3,"click"],["mat-raised-button","","type","submit","color","accent",3,"click"]],template:function(t,e){1&t&&(a.Sb(0,"form",0),a.Sb(1,"mat-form-field"),a.Ob(2,"input",1),a.Rb(),a.Sb(3,"mat-form-field"),a.Ob(4,"input",2),a.Rb(),a.Sb(5,"mat-form-field"),a.Ob(6,"textarea",3),a.Rb(),a.Sb(7,"button",4),a.ac("click",(function(t){return e.onSubmit()})),a.sc(8,"Post"),a.Rb(),a.Sb(9,"button",5),a.ac("click",(function(t){return e.onClose()})),a.sc(10,"Close"),a.Rb(),a.Rb()),2&t&&a.hc("formGroup",e.form)},directives:[q.l,q.h,q.d,G.b,Z.a,q.a,q.g,q.c,Z.c,V.b],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),j),Y=i("vxfF"),K=i("nLfN"),J=i("8LU1"),X=i("quSY"),$=i("HDdC"),Q=i("D0XW"),tt=i("Y7HM");function et(t){var e=t.subscriber,i=t.counter,n=t.period;e.next(i),this.schedule({subscriber:e,counter:i+1,period:n},n)}var it=i("eNwd"),nt=i("VRyK"),rt=i("1G5W"),ot=i("vkgz"),at=i("eIep");function st(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function lt(t,e){var i=e?"":"none";st(t.style,{touchAction:e?"":"none",webkitUserDrag:e?"":"none",webkitTapHighlightColor:e?"":"transparent",userSelect:i,msUserSelect:i,webkitUserSelect:i,MozUserSelect:i})}function ct(t){var e=t.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(t)*e}function ht(t,e){return t.getPropertyValue(e).split(",").map((function(t){return t.trim()}))}var ut=Object(K.g)({passive:!0}),dt=Object(K.g)({passive:!1}),pt=function(){function t(e,i,n,r,o,a){var s=this;_classCallCheck(this,t),this._config=i,this._document=n,this._ngZone=r,this._viewportRuler=o,this._dragDropRegistry=a,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._moveEvents=new v.a,this._pointerMoveSubscription=X.a.EMPTY,this._pointerUpSubscription=X.a.EMPTY,this._scrollSubscription=X.a.EMPTY,this._resizeSubscription=X.a.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new v.a,this.started=new v.a,this.released=new v.a,this.ended=new v.a,this.entered=new v.a,this.exited=new v.a,this.dropped=new v.a,this.moved=this._moveEvents.asObservable(),this._pointerDown=function(t){if(s.beforeStarted.next(),s._handles.length){var e=s._handles.find((function(e){var i=t.target;return!!i&&(i===e||e.contains(i))}));!e||s._disabledHandles.has(e)||s.disabled||s._initializeDragSequence(e,t)}else s.disabled||s._initializeDragSequence(s._rootElement,t)},this._pointerMove=function(t){if(t.preventDefault(),s._hasStartedDragging){s._boundaryElement&&(s._previewRect&&(s._previewRect.width||s._previewRect.height)||(s._previewRect=(s._preview||s._rootElement).getBoundingClientRect()));var e=s._getConstrainedPointerPosition(t);if(s._hasMoved=!0,s._updatePointerDirectionDelta(e),s._dropContainer)s._updateActiveDropContainer(e);else{var i=s._activeTransform;i.x=e.x-s._pickupPositionOnPage.x+s._passiveTransform.x,i.y=e.y-s._pickupPositionOnPage.y+s._passiveTransform.y,s._applyRootElementTransform(i.x,i.y),"undefined"!=typeof SVGElement&&s._rootElement instanceof SVGElement&&s._rootElement.setAttribute("transform","translate(".concat(i.x," ").concat(i.y,")"))}s._moveEvents.observers.length&&s._ngZone.run((function(){s._moveEvents.next({source:s,pointerPosition:e,event:t,distance:s._getDragDistance(e),delta:s._pointerDirectionDelta})}))}else{var n=s._getPointerPositionOnPage(t);if(Math.abs(n.x-s._pickupPositionOnPage.x)+Math.abs(n.y-s._pickupPositionOnPage.y)>=s._config.dragStartThreshold){if(!(Date.now()>=s._dragStartTime+s._getDragStartDelay(t)))return void s._endDragSequence(t);s._dropContainer&&s._dropContainer.isDragging()||(s._hasStartedDragging=!0,s._ngZone.run((function(){return s._startDragSequence(t)})))}}},this._pointerUp=function(t){s._endDragSequence(t)},this.withRootElement(e),a.registerDragItem(this)}return _createClass(t,[{key:"getPlaceholderElement",value:function(){return this._placeholder}},{key:"getRootElement",value:function(){return this._rootElement}},{key:"withHandles",value:function(t){return this._handles=t.map((function(t){return Object(J.d)(t)})),this._handles.forEach((function(t){return lt(t,!1)})),this._toggleNativeDragInteractions(),this}},{key:"withPreviewTemplate",value:function(t){return this._previewTemplate=t,this}},{key:"withPlaceholderTemplate",value:function(t){return this._placeholderTemplate=t,this}},{key:"withRootElement",value:function(t){var e=Object(J.d)(t);return e!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),e.addEventListener("mousedown",this._pointerDown,dt),e.addEventListener("touchstart",this._pointerDown,ut),this._initialTransform=void 0,this._rootElement=e),this}},{key:"withBoundaryElement",value:function(t){var e=this;return this._boundaryElement=t?Object(J.d)(t):null,this._resizeSubscription.unsubscribe(),t&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe((function(){return e._containInsideBoundaryOnResize()}))),this}},{key:"dispose",value:function(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&vt(this._rootElement),vt(this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._boundaryElement=this._rootElement=this._placeholderTemplate=this._previewTemplate=this._anchor=null}},{key:"isDragging",value:function(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}},{key:"reset",value:function(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}},{key:"disableHandle",value:function(t){this._handles.indexOf(t)>-1&&this._disabledHandles.add(t)}},{key:"enableHandle",value:function(t){this._disabledHandles.delete(t)}},{key:"withDirection",value:function(t){return this._direction=t,this}},{key:"_withDropContainer",value:function(t){this._dropContainer=t}},{key:"getFreeDragPosition",value:function(){var t=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:t.x,y:t.y}}},{key:"setFreeDragPosition",value:function(t){return this._activeTransform={x:0,y:0},this._passiveTransform.x=t.x,this._passiveTransform.y=t.y,this._dropContainer||this._applyRootElementTransform(t.x,t.y),this}},{key:"_sortFromLastPointerPosition",value:function(){var t=this._pointerPositionAtLastDirectionChange;t&&this._dropContainer&&this._updateActiveDropContainer(t)}},{key:"_removeSubscriptions",value:function(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}},{key:"_destroyPreview",value:function(){this._preview&&vt(this._preview),this._previewRef&&this._previewRef.destroy(),this._preview=this._previewRef=null}},{key:"_destroyPlaceholder",value:function(){this._placeholder&&vt(this._placeholder),this._placeholderRef&&this._placeholderRef.destroy(),this._placeholder=this._placeholderRef=null}},{key:"_endDragSequence",value:function(t){var e=this;this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging&&(this.released.next({source:this}),this._dropContainer?(this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then((function(){e._cleanupDragArtifacts(t),e._cleanupCachedDimensions(),e._dragDropRegistry.stopDragging(e)}))):(this._passiveTransform.x=this._activeTransform.x,this._passiveTransform.y=this._activeTransform.y,this._ngZone.run((function(){e.ended.next({source:e,distance:e._getDragDistance(e._getPointerPositionOnPage(t))})})),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this))))}},{key:"_startDragSequence",value:function(t){if(this.started.next({source:this}),bt(t)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions(),this._dropContainer){var e=this._rootElement,i=e.parentNode,n=this._preview=this._createPreviewElement(),r=this._placeholder=this._createPlaceholderElement(),o=this._anchor=this._anchor||this._document.createComment("");i.insertBefore(o,e),e.style.display="none",this._document.body.appendChild(i.replaceChild(r,e)),(a=this._document,a.fullscreenElement||a.webkitFullscreenElement||a.mozFullScreenElement||a.msFullscreenElement||a.body).appendChild(n),this._dropContainer.start()}var a}},{key:"_initializeDragSequence",value:function(t,e){var i=this;e.stopPropagation();var n=this.isDragging(),r=bt(e),o=!r&&0!==e.button,a=this._rootElement,s=!r&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now();if(e.target&&e.target.draggable&&"mousedown"===e.type&&e.preventDefault(),!(n||o||s)){this._handles.length&&(this._rootElementTapHighlight=a.style.webkitTapHighlightColor,a.style.webkitTapHighlightColor="transparent"),this._hasStartedDragging=this._hasMoved=!1,this._initialContainer=this._dropContainer,this._removeSubscriptions(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scroll.pipe(Object(D.a)(null)).subscribe((function(){i._scrollPosition=i._viewportRuler.getViewportScrollPosition()})),this._boundaryElement&&(this._boundaryRect=this._boundaryElement.getBoundingClientRect()),this._pickupPositionInElement=this._previewTemplate&&this._previewTemplate.template?{x:0,y:0}:this._getPointerPositionInElement(t,e);var l=this._pickupPositionOnPage=this._getPointerPositionOnPage(e);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:l.x,y:l.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,e)}}},{key:"_cleanupDragArtifacts",value:function(t){var e=this;this._rootElement.style.display="",this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._boundaryRect=this._previewRect=void 0,this._ngZone.run((function(){var i=e._dropContainer,n=i.getItemIndex(e),r=e._getPointerPositionOnPage(t),o=e._getDragDistance(e._getPointerPositionOnPage(t)),a=i._isOverContainer(r.x,r.y);e.ended.next({source:e,distance:o}),e.dropped.next({item:e,currentIndex:n,previousIndex:e._initialContainer.getItemIndex(e),container:i,previousContainer:e._initialContainer,isPointerOverContainer:a,distance:o}),i.drop(e,n,e._initialContainer,a,o),e._dropContainer=e._initialContainer}))}},{key:"_updateActiveDropContainer",value:function(t){var e=this,i=t.x,n=t.y,r=this._initialContainer._getSiblingContainerFromPosition(this,i,n);!r&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(i,n)&&(r=this._initialContainer),r&&r!==this._dropContainer&&this._ngZone.run((function(){e.exited.next({item:e,container:e._dropContainer}),e._dropContainer.exit(e),e._dropContainer=r,e._dropContainer.enter(e,i,n),e.entered.next({item:e,container:r,currentIndex:r.getItemIndex(e)})})),this._dropContainer._startScrollingIfNecessary(i,n),this._dropContainer._sortItem(this,i,n,this._pointerDirectionDelta),this._preview.style.transform=_t(i-this._pickupPositionInElement.x,n-this._pickupPositionInElement.y)}},{key:"_createPreviewElement",value:function(){var t,e=this._previewTemplate,i=this.previewClass,n=e?e.template:null;if(n){var r=e.viewContainer.createEmbeddedView(n,e.context);t=mt(r,this._document),this._previewRef=r,t.style.transform=_t(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else{var o=this._rootElement,a=o.getBoundingClientRect();(t=ft(o)).style.width="".concat(a.width,"px"),t.style.height="".concat(a.height,"px"),t.style.transform=_t(a.left,a.top)}return st(t.style,{pointerEvents:"none",margin:"0",position:"fixed",top:"0",left:"0",zIndex:"1000"}),lt(t,!1),t.classList.add("cdk-drag-preview"),t.setAttribute("dir",this._direction),i&&(Array.isArray(i)?i.forEach((function(e){return t.classList.add(e)})):t.classList.add(i)),t}},{key:"_animatePreviewToPlaceholder",value:function(){var t=this;if(!this._hasMoved)return Promise.resolve();var e=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._preview.style.transform=_t(e.left,e.top);var i=function(t){var e=getComputedStyle(t),i=ht(e,"transition-property"),n=i.find((function(t){return"transform"===t||"all"===t}));if(!n)return 0;var r=i.indexOf(n),o=ht(e,"transition-duration"),a=ht(e,"transition-delay");return ct(o[r])+ct(a[r])}(this._preview);return 0===i?Promise.resolve():this._ngZone.runOutsideAngular((function(){return new Promise((function(e){var n=function i(n){(!n||n.target===t._preview&&"transform"===n.propertyName)&&(t._preview.removeEventListener("transitionend",i),e(),clearTimeout(r))},r=setTimeout(n,1.5*i);t._preview.addEventListener("transitionend",n)}))}))}},{key:"_createPlaceholderElement",value:function(){var t,e=this._placeholderTemplate,i=e?e.template:null;return i?(this._placeholderRef=e.viewContainer.createEmbeddedView(i,e.context),t=mt(this._placeholderRef,this._document)):t=ft(this._rootElement),t.classList.add("cdk-drag-placeholder"),t}},{key:"_getPointerPositionInElement",value:function(t,e){var i=this._rootElement.getBoundingClientRect(),n=t===this._rootElement?null:t,r=n?n.getBoundingClientRect():i,o=bt(e)?e.targetTouches[0]:e;return{x:r.left-i.left+(o.pageX-r.left-this._scrollPosition.left),y:r.top-i.top+(o.pageY-r.top-this._scrollPosition.top)}}},{key:"_getPointerPositionOnPage",value:function(t){var e=bt(t)?t.touches[0]||t.changedTouches[0]:t;return{x:e.pageX-this._scrollPosition.left,y:e.pageY-this._scrollPosition.top}}},{key:"_getConstrainedPointerPosition",value:function(t){var e=this._getPointerPositionOnPage(t),i=this.constrainPosition?this.constrainPosition(e,this):e,n=this._dropContainer?this._dropContainer.lockAxis:null;if("x"===this.lockAxis||"x"===n?i.y=this._pickupPositionOnPage.y:"y"!==this.lockAxis&&"y"!==n||(i.x=this._pickupPositionOnPage.x),this._boundaryRect){var r=this._pickupPositionInElement,o=r.x,a=r.y,s=this._boundaryRect,l=this._previewRect,c=s.top+a,h=s.bottom-(l.height-a);i.x=gt(i.x,s.left+o,s.right-(l.width-o)),i.y=gt(i.y,c,h)}return i}},{key:"_updatePointerDirectionDelta",value:function(t){var e=t.x,i=t.y,n=this._pointerDirectionDelta,r=this._pointerPositionAtLastDirectionChange,o=Math.abs(e-r.x),a=Math.abs(i-r.y);return o>this._config.pointerDirectionChangeThreshold&&(n.x=e>r.x?1:-1,r.x=e),a>this._config.pointerDirectionChangeThreshold&&(n.y=i>r.y?1:-1,r.y=i),n}},{key:"_toggleNativeDragInteractions",value:function(){if(this._rootElement&&this._handles){var t=this._handles.length>0||!this.isDragging();t!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=t,lt(this._rootElement,t))}}},{key:"_removeRootElementListeners",value:function(t){t.removeEventListener("mousedown",this._pointerDown,dt),t.removeEventListener("touchstart",this._pointerDown,ut)}},{key:"_applyRootElementTransform",value:function(t,e){var i=_t(t,e);null==this._initialTransform&&(this._initialTransform=this._rootElement.style.transform||""),this._rootElement.style.transform=this._initialTransform?i+" "+this._initialTransform:i}},{key:"_getDragDistance",value:function(t){var e=this._pickupPositionOnPage;return e?{x:t.x-e.x,y:t.y-e.y}:{x:0,y:0}}},{key:"_cleanupCachedDimensions",value:function(){this._boundaryRect=this._previewRect=void 0}},{key:"_containInsideBoundaryOnResize",value:function(){var t=this._passiveTransform,e=t.x,i=t.y;if(!(0===e&&0===i||this.isDragging())&&this._boundaryElement){var n=this._boundaryElement.getBoundingClientRect(),r=this._rootElement.getBoundingClientRect();if(!(0===n.width&&0===n.height||0===r.width&&0===r.height)){var o=n.left-r.left,a=r.right-n.right,s=n.top-r.top,l=r.bottom-n.bottom;n.width>r.width?(o>0&&(e+=o),a>0&&(e-=a)):e=0,n.height>r.height?(s>0&&(i+=s),l>0&&(i-=l)):i=0,e===this._passiveTransform.x&&i===this._passiveTransform.y||this.setFreeDragPosition({y:i,x:e})}}}},{key:"_getDragStartDelay",value:function(t){var e=this.dragStartDelay;return"number"==typeof e?e:bt(t)?e.touch:e?e.mouse:0}},{key:"disabled",get:function(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)},set:function(t){var e=Object(J.b)(t);e!==this._disabled&&(this._disabled=e,this._toggleNativeDragInteractions())}}]),t}();function _t(t,e){return"translate3d(".concat(Math.round(t),"px, ").concat(Math.round(e),"px, 0)")}function ft(t){var e=t.cloneNode(!0),i=e.querySelectorAll("[id]"),n=t.querySelectorAll("canvas");e.removeAttribute("id");for(var r=0;r<i.length;r++)i[r].removeAttribute("id");if(n.length)for(var o=e.querySelectorAll("canvas"),a=0;a<n.length;a++){var s=o[a].getContext("2d");s&&s.drawImage(n[a],0,0)}return e}function gt(t,e,i){return Math.max(e,Math.min(i,t))}function vt(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function bt(t){return"t"===t.type[0]}function mt(t,e){var i=t.rootNodes[0];if(i.nodeType!==e.ELEMENT_NODE){var n=e.createElement("div");return n.appendChild(i),n}return i}function yt(t,e){return Math.max(0,Math.min(e,t))}var wt=function(){function t(e,i,n,r,o){var a=this;_classCallCheck(this,t),this._dragDropRegistry=i,this._ngZone=r,this._viewportRuler=o,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.enterPredicate=function(){return!0},this.beforeStarted=new v.a,this.entered=new v.a,this.exited=new v.a,this.dropped=new v.a,this.sorted=new v.a,this._isDragging=!1,this._itemPositions=[],this._scrollPosition={top:0,left:0},this._viewportScrollPosition={top:0,left:0},this._previousSwap={drag:null,delta:0},this._siblings=[],this._orientation="vertical",this._activeSiblings=new Set,this._direction="ltr",this._viewportScrollSubscription=X.a.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new v.a,this._cachedShadowRoot=null,this._handleScroll=function(){if(a.isDragging()){var t=Object(J.d)(a.element);a._updateAfterScroll(a._scrollPosition,t.scrollTop,t.scrollLeft)}},this._startScrollInterval=function(){a._stopScrolling(),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Q.a;return(!Object(tt.a)(t)||t<0)&&(t=0),e&&"function"==typeof e.schedule||(e=Q.a),new $.a((function(i){return i.add(e.schedule(et,t,{subscriber:i,counter:0,period:t})),i}))}(0,it.a).pipe(Object(rt.a)(a._stopScrollTimers)).subscribe((function(){var t=a._scrollNode;1===a._verticalScrollDirection?St(t,-2):2===a._verticalScrollDirection&&St(t,2),1===a._horizontalScrollDirection?xt(t,-2):2===a._horizontalScrollDirection&&xt(t,2)}))},this.element=Object(J.d)(e),this._document=n,i.registerDropContainer(this)}return _createClass(t,[{key:"dispose",value:function(){this._stopScrolling(),this._stopScrollTimers.complete(),this._removeListeners(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._dragDropRegistry.removeDropContainer(this)}},{key:"isDragging",value:function(){return this._isDragging}},{key:"start",value:function(){var t=this,e=Object(J.d)(this.element);this.beforeStarted.next(),this._isDragging=!0,this._cacheItems(),this._siblings.forEach((function(e){return e._startReceiving(t)})),this._removeListeners(),this._ngZone.runOutsideAngular((function(){return e.addEventListener("scroll",t._handleScroll)})),this._listenToScrollEvents()}},{key:"enter",value:function(t,e,i){this.start();var n=this.sortingDisabled?this._draggables.indexOf(t):-1;-1===n&&(n=this._getItemIndexFromPointerPosition(t,e,i));var r=this._activeDraggables,o=r.indexOf(t),a=t.getPlaceholderElement(),s=r[n];if(s===t&&(s=r[n+1]),o>-1&&r.splice(o,1),s&&!this._dragDropRegistry.isDragging(s)){var l=s.getRootElement();l.parentElement.insertBefore(a,l),r.splice(n,0,t)}else Object(J.d)(this.element).appendChild(a),r.push(t);a.style.transform="",this._cacheItemPositions(),this.entered.next({item:t,container:this,currentIndex:this.getItemIndex(t)})}},{key:"exit",value:function(t){this._reset(),this.exited.next({item:t,container:this})}},{key:"drop",value:function(t,e,i,n,r){this._reset(),this.dropped.next({item:t,currentIndex:e,previousIndex:i.getItemIndex(t),container:this,previousContainer:i,isPointerOverContainer:n,distance:r})}},{key:"withItems",value:function(t){var e=this;return this._draggables=t,t.forEach((function(t){return t._withDropContainer(e)})),this.isDragging()&&this._cacheItems(),this}},{key:"withDirection",value:function(t){return this._direction=t,this}},{key:"connectedTo",value:function(t){return this._siblings=t.slice(),this}},{key:"withOrientation",value:function(t){return this._orientation=t,this}},{key:"getItemIndex",value:function(t){return this._isDragging?Ct("horizontal"===this._orientation&&"rtl"===this._direction?this._itemPositions.slice().reverse():this._itemPositions,(function(e){return e.drag===t})):this._draggables.indexOf(t)}},{key:"isReceiving",value:function(){return this._activeSiblings.size>0}},{key:"_sortItem",value:function(t,e,i,n){if(!this.sortingDisabled&&this._isPointerNearDropContainer(e,i)){var r=this._itemPositions,o=this._getItemIndexFromPointerPosition(t,e,i,n);if(!(-1===o&&r.length>0)){var a="horizontal"===this._orientation,s=Ct(r,(function(e){return e.drag===t})),l=r[o],c=r[s].clientRect,h=l.clientRect,u=s>o?1:-1;this._previousSwap.drag=l.drag,this._previousSwap.delta=a?n.x:n.y;var d=this._getItemOffsetPx(c,h,u),p=this._getSiblingOffsetPx(s,r,u),_=r.slice();!function(t,e,i){var n=yt(e,t.length-1),r=yt(i,t.length-1);if(n!==r){for(var o=t[n],a=r<n?-1:1,s=n;s!==r;s+=a)t[s]=t[s+a];t[r]=o}}(r,s,o),this.sorted.next({previousIndex:s,currentIndex:o,container:this,item:t}),r.forEach((function(e,i){if(_[i]!==e){var n=e.drag===t,r=n?d:p,o=n?t.getPlaceholderElement():e.drag.getRootElement();e.offset+=r,a?(o.style.transform="translate3d(".concat(Math.round(e.offset),"px, 0, 0)"),Dt(e.clientRect,0,r)):(o.style.transform="translate3d(0, ".concat(Math.round(e.offset),"px, 0)"),Dt(e.clientRect,r,0))}}))}}}},{key:"_startScrollingIfNecessary",value:function(t,e){if(!this.autoScrollDisabled){var i,n=0,r=0;if(this._isPointerNearDropContainer(t,e)){var o,a,s=Object(J.d)(this.element);o=function(t,e,i,n){var r=Ot(e,n),o=Rt(e,i),a=0,s=0;if(r){var l=t.scrollTop;1===r?l>0&&(a=1):t.scrollHeight-l>t.clientHeight&&(a=2)}if(o){var c=t.scrollLeft;1===o?c>0&&(s=1):t.scrollWidth-c>t.clientWidth&&(s=2)}return[a,s]}(s,this._clientRect,t,e),n=(a=_slicedToArray(o,2))[0],r=a[1],(n||r)&&(i=s)}if(!n&&!r){var l=this._viewportRuler.getViewportSize(),c=l.width,h=l.height,u={width:c,height:h,top:0,right:c,bottom:h,left:0};n=Ot(u,e),r=Rt(u,t),i=window}!i||n===this._verticalScrollDirection&&r===this._horizontalScrollDirection&&i===this._scrollNode||(this._verticalScrollDirection=n,this._horizontalScrollDirection=r,this._scrollNode=i,(n||r)&&i?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}}},{key:"_stopScrolling",value:function(){this._stopScrollTimers.next()}},{key:"_cacheOwnPosition",value:function(){var t=Object(J.d)(this.element);this._clientRect=Pt(t),this._scrollPosition={top:t.scrollTop,left:t.scrollLeft}}},{key:"_cacheItemPositions",value:function(){var t=this,e="horizontal"===this._orientation;this._itemPositions=this._activeDraggables.map((function(e){var i=t._dragDropRegistry.isDragging(e)?e.getPlaceholderElement():e.getRootElement();return{drag:e,offset:0,clientRect:Pt(i)}})).sort((function(t,i){return e?t.clientRect.left-i.clientRect.left:t.clientRect.top-i.clientRect.top}))}},{key:"_reset",value:function(){var t=this;this._isDragging=!1,this._activeDraggables.forEach((function(t){return t.getRootElement().style.transform=""})),this._siblings.forEach((function(e){return e._stopReceiving(t)})),this._activeDraggables=[],this._itemPositions=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._stopScrolling(),this._removeListeners()}},{key:"_getSiblingOffsetPx",value:function(t,e,i){var n="horizontal"===this._orientation,r=e[t].clientRect,o=e[t+-1*i],a=r[n?"width":"height"]*i;if(o){var s=n?"left":"top",l=n?"right":"bottom";-1===i?a-=o.clientRect[s]-r[l]:a+=r[s]-o.clientRect[l]}return a}},{key:"_isPointerNearDropContainer",value:function(t,e){var i=this._clientRect,n=i.top,r=i.right,o=i.bottom,a=i.left,s=.05*i.width,l=.05*i.height;return e>n-l&&e<o+l&&t>a-s&&t<r+s}},{key:"_getItemOffsetPx",value:function(t,e,i){var n="horizontal"===this._orientation,r=n?e.left-t.left:e.top-t.top;return-1===i&&(r+=n?e.width-t.width:e.height-t.height),r}},{key:"_getItemIndexFromPointerPosition",value:function(t,e,i,n){var r=this,o="horizontal"===this._orientation;return Ct(this._itemPositions,(function(a,s,l){var c=a.drag,h=a.clientRect;if(c===t)return l.length<2;if(n){var u=o?n.x:n.y;if(c===r._previousSwap.drag&&u===r._previousSwap.delta)return!1}return o?e>=Math.floor(h.left)&&e<=Math.floor(h.right):i>=Math.floor(h.top)&&i<=Math.floor(h.bottom)}))}},{key:"_cacheItems",value:function(){this._activeDraggables=this._draggables.slice(),this._cacheItemPositions(),this._cacheOwnPosition()}},{key:"_updateAfterScroll",value:function(t,e,i,n){var r=this,o=t.top-e,a=t.left-i;n&&Dt(n,o,a),this._itemPositions.forEach((function(t){Dt(t.clientRect,o,a)})),this._itemPositions.forEach((function(t){var e=t.drag;r._dragDropRegistry.isDragging(e)&&e._sortFromLastPointerPosition()})),t.top=e,t.left=i}},{key:"_removeListeners",value:function(){Object(J.d)(this.element).removeEventListener("scroll",this._handleScroll),this._viewportScrollSubscription.unsubscribe()}},{key:"_isOverContainer",value:function(t,e){return kt(this._clientRect,t,e)}},{key:"_getSiblingContainerFromPosition",value:function(t,e,i){return this._siblings.find((function(n){return n._canReceive(t,e,i)}))}},{key:"_canReceive",value:function(t,e,i){if(!kt(this._clientRect,e,i)||!this.enterPredicate(t,this))return!1;var n=this._getShadowRoot().elementFromPoint(e,i);if(!n)return!1;var r=Object(J.d)(this.element);return n===r||r.contains(n)}},{key:"_startReceiving",value:function(t){var e=this._activeSiblings;e.has(t)||(e.add(t),this._cacheOwnPosition(),this._listenToScrollEvents())}},{key:"_stopReceiving",value:function(t){this._activeSiblings.delete(t),this._viewportScrollSubscription.unsubscribe()}},{key:"_listenToScrollEvents",value:function(){var t=this;this._viewportScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._viewportScrollSubscription=this._dragDropRegistry.scroll.subscribe((function(){if(t.isDragging()){var e=t._viewportRuler.getViewportScrollPosition();t._updateAfterScroll(t._viewportScrollPosition,e.top,e.left,t._clientRect)}else t.isReceiving()&&t._cacheOwnPosition()}))}},{key:"_getShadowRoot",value:function(){return this._cachedShadowRoot||(this._cachedShadowRoot=function(t){if(Object(K.d)()){var e=t.getRootNode?t.getRootNode():null;if(e instanceof ShadowRoot)return e}return null}(Object(J.d)(this.element))||this._document),this._cachedShadowRoot}}]),t}();function Dt(t,e,i){t.top+=e,t.bottom=t.top+t.height,t.left+=i,t.right=t.left+t.width}function Ct(t,e){for(var i=0;i<t.length;i++)if(e(t[i],i,t))return i;return-1}function kt(t,e,i){var n=t.top,r=t.bottom,o=t.left,a=t.right;return i>=n&&i<=r&&e>=o&&e<=a}function Pt(t){var e=t.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height}}function St(t,e){t===window?t.scrollBy(0,e):t.scrollTop+=e}function xt(t,e){t===window?t.scrollBy(e,0):t.scrollLeft+=e}function Ot(t,e){var i=t.top,n=t.bottom,r=.05*t.height;return e>=i-r&&e<=i+r?1:e>=n-r&&e<=n+r?2:0}function Rt(t,e){var i=t.left,n=t.right,r=.05*t.width;return e>=i-r&&e<=i+r?1:e>=n-r&&e<=n+r?2:0}var Et,It,Tt,jt,At,Lt,Nt=Object(K.g)({passive:!1,capture:!0}),Ft=((Et=function(){function t(e,i){var n=this;_classCallCheck(this,t),this._ngZone=e,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=new Set,this._globalListeners=new Map,this.pointerMove=new v.a,this.pointerUp=new v.a,this.scroll=new v.a,this._preventDefaultWhileDragging=function(t){n._activeDragInstances.size&&t.preventDefault()},this._document=i}return _createClass(t,[{key:"registerDropContainer",value:function(t){this._dropInstances.has(t)||this._dropInstances.add(t)}},{key:"registerDragItem",value:function(t){var e=this;this._dragInstances.add(t),1===this._dragInstances.size&&this._ngZone.runOutsideAngular((function(){e._document.addEventListener("touchmove",e._preventDefaultWhileDragging,Nt)}))}},{key:"removeDropContainer",value:function(t){this._dropInstances.delete(t)}},{key:"removeDragItem",value:function(t){this._dragInstances.delete(t),this.stopDragging(t),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._preventDefaultWhileDragging,Nt)}},{key:"startDragging",value:function(t,e){var i=this;if(!this._activeDragInstances.has(t)&&(this._activeDragInstances.add(t),1===this._activeDragInstances.size)){var n=e.type.startsWith("touch"),r=n?"touchend":"mouseup";this._globalListeners.set(n?"touchmove":"mousemove",{handler:function(t){return i.pointerMove.next(t)},options:Nt}).set(r,{handler:function(t){return i.pointerUp.next(t)},options:!0}).set("scroll",{handler:function(t){return i.scroll.next(t)},options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:Nt}),this._ngZone.runOutsideAngular((function(){i._globalListeners.forEach((function(t,e){i._document.addEventListener(e,t.handler,t.options)}))}))}}},{key:"stopDragging",value:function(t){this._activeDragInstances.delete(t),0===this._activeDragInstances.size&&this._clearGlobalListeners()}},{key:"isDragging",value:function(t){return this._activeDragInstances.has(t)}},{key:"ngOnDestroy",value:function(){var t=this;this._dragInstances.forEach((function(e){return t.removeDragItem(e)})),this._dropInstances.forEach((function(e){return t.removeDropContainer(e)})),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}},{key:"_clearGlobalListeners",value:function(){var t=this;this._globalListeners.forEach((function(e,i){t._document.removeEventListener(i,e.handler,e.options)})),this._globalListeners.clear()}}]),t}()).\u0275fac=function(t){return new(t||Et)(a.Wb(a.z),a.Wb(r.d))},Et.\u0275prov=Object(a.Jb)({factory:function(){return new Et(Object(a.Wb)(a.z),Object(a.Wb)(r.d))},token:Et,providedIn:"root"}),Et),Mt={dragStartThreshold:5,pointerDirectionChangeThreshold:5},Wt=((It=function(){function t(e,i,n,r){_classCallCheck(this,t),this._document=e,this._ngZone=i,this._viewportRuler=n,this._dragDropRegistry=r}return _createClass(t,[{key:"createDrag",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Mt;return new pt(t,e,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}},{key:"createDropList",value:function(t){return new wt(t,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}]),t}()).\u0275fac=function(t){return new(t||It)(a.Wb(r.d),a.Wb(a.z),a.Wb(Y.d),a.Wb(Ft))},It.\u0275prov=Object(a.Jb)({factory:function(){return new It(Object(a.Wb)(r.d),Object(a.Wb)(a.z),Object(a.Wb)(Y.d),Object(a.Wb)(Ft))},token:It,providedIn:"root"}),It),zt=new a.q("CDK_DRAG_PARENT"),Bt=((At=function(){function t(e,i){_classCallCheck(this,t),this.element=e,this._stateChanges=new v.a,this._disabled=!1,this._parentDrag=i,lt(e.nativeElement,!1)}return _createClass(t,[{key:"ngOnDestroy",value:function(){this._stateChanges.complete()}},{key:"disabled",get:function(){return this._disabled},set:function(t){this._disabled=Object(J.b)(t),this._stateChanges.next(this)}}]),t}()).\u0275fac=function(t){return new(t||At)(a.Nb(a.l),a.Nb(zt,8))},At.\u0275dir=a.Ib({type:At,selectors:[["","cdkDragHandle",""]],hostAttrs:[1,"cdk-drag-handle"],inputs:{disabled:["cdkDragHandleDisabled","disabled"]}}),At),Ht=((jt=function t(e){_classCallCheck(this,t),this.templateRef=e}).\u0275fac=function(t){return new(t||jt)(a.Nb(a.L))},jt.\u0275dir=a.Ib({type:jt,selectors:[["ng-template","cdkDragPlaceholder",""]],inputs:{data:"data"}}),jt),qt=((Tt=function t(e){_classCallCheck(this,t),this.templateRef=e}).\u0275fac=function(t){return new(t||Tt)(a.Nb(a.L))},Tt.\u0275dir=a.Ib({type:Tt,selectors:[["ng-template","cdkDragPreview",""]],inputs:{data:"data"}}),Tt),Gt=new a.q("CDK_DROP_LIST"),Zt=new a.q("CDK_DRAG_CONFIG",{providedIn:"root",factory:function(){return{dragStartThreshold:5,pointerDirectionChangeThreshold:5}}}),Vt=((Lt=function(){function t(e,i,n,r,o,l,c,h,u){var d=this;_classCallCheck(this,t),this.element=e,this.dropContainer=i,this._document=n,this._ngZone=r,this._viewContainerRef=o,this._dir=c,this._changeDetectorRef=u,this._destroyed=new v.a,this.dragStartDelay=0,this._disabled=!1,this.started=new a.n,this.released=new a.n,this.ended=new a.n,this.entered=new a.n,this.exited=new a.n,this.dropped=new a.n,this.moved=new $.a((function(t){var e=d._dragRef.moved.pipe(Object(s.a)((function(t){return{source:d,pointerPosition:t.pointerPosition,event:t.event,delta:t.delta,distance:t.distance}}))).subscribe(t);return function(){e.unsubscribe()}})),this._dragRef=h.createDrag(e,l),this._dragRef.data=this,this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}return _createClass(t,[{key:"getPlaceholderElement",value:function(){return this._dragRef.getPlaceholderElement()}},{key:"getRootElement",value:function(){return this._dragRef.getRootElement()}},{key:"reset",value:function(){this._dragRef.reset()}},{key:"getFreeDragPosition",value:function(){return this._dragRef.getFreeDragPosition()}},{key:"ngAfterViewInit",value:function(){var t=this;this._ngZone.onStable.asObservable().pipe(Object(w.a)(1),Object(rt.a)(this._destroyed)).subscribe((function(){t._updateRootElement(),t._handles.changes.pipe(Object(D.a)(t._handles),Object(ot.a)((function(e){var i=e.filter((function(e){return e._parentDrag===t})).map((function(t){return t.element}));t._dragRef.withHandles(i)})),Object(at.a)((function(t){return Object(nt.a).apply(void 0,_toConsumableArray(t.map((function(t){return t._stateChanges.pipe(Object(D.a)(t))}))))})),Object(rt.a)(t._destroyed)).subscribe((function(e){var i=t._dragRef,n=e.element.nativeElement;e.disabled?i.disableHandle(n):i.enableHandle(n)})),t.freeDragPosition&&t._dragRef.setFreeDragPosition(t.freeDragPosition)}))}},{key:"ngOnChanges",value:function(t){var e=t.rootElementSelector,i=t.freeDragPosition;e&&!e.firstChange&&this._updateRootElement(),i&&!i.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}},{key:"ngOnDestroy",value:function(){this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()}},{key:"_updateRootElement",value:function(){var t=this.element.nativeElement,e=this.rootElementSelector?Ut(t,this.rootElementSelector):t;if(e&&e.nodeType!==this._document.ELEMENT_NODE)throw Error("cdkDrag must be attached to an element node. "+'Currently attached to "'.concat(e.nodeName,'".'));this._dragRef.withRootElement(e||t)}},{key:"_getBoundaryElement",value:function(){var t=this.boundaryElement;if(!t)return null;if("string"==typeof t)return Ut(this.element.nativeElement,t);var e=Object(J.d)(t);if(Object(a.W)()&&!e.contains(this.element.nativeElement))throw Error("Draggable element is not inside of the node passed into cdkDragBoundary.");return e}},{key:"_syncInputs",value:function(t){var e=this;t.beforeStarted.subscribe((function(){if(!t.isDragging()){var i=e._dir,n=e.dragStartDelay,r=e._placeholderTemplate?{template:e._placeholderTemplate.templateRef,context:e._placeholderTemplate.data,viewContainer:e._viewContainerRef}:null,o=e._previewTemplate?{template:e._previewTemplate.templateRef,context:e._previewTemplate.data,viewContainer:e._viewContainerRef}:null;t.disabled=e.disabled,t.lockAxis=e.lockAxis,t.dragStartDelay="object"==typeof n&&n?n:Object(J.e)(n),t.constrainPosition=e.constrainPosition,t.previewClass=e.previewClass,t.withBoundaryElement(e._getBoundaryElement()).withPlaceholderTemplate(r).withPreviewTemplate(o),i&&t.withDirection(i.value)}}))}},{key:"_handleEvents",value:function(t){var e=this;t.started.subscribe((function(){e.started.emit({source:e}),e._changeDetectorRef.markForCheck()})),t.released.subscribe((function(){e.released.emit({source:e})})),t.ended.subscribe((function(t){e.ended.emit({source:e,distance:t.distance}),e._changeDetectorRef.markForCheck()})),t.entered.subscribe((function(t){e.entered.emit({container:t.container.data,item:e,currentIndex:t.currentIndex})})),t.exited.subscribe((function(t){e.exited.emit({container:t.container.data,item:e})})),t.dropped.subscribe((function(t){e.dropped.emit({previousIndex:t.previousIndex,currentIndex:t.currentIndex,previousContainer:t.previousContainer.data,container:t.container.data,isPointerOverContainer:t.isPointerOverContainer,item:e,distance:t.distance})}))}},{key:"disabled",get:function(){return this._disabled||this.dropContainer&&this.dropContainer.disabled},set:function(t){this._disabled=Object(J.b)(t),this._dragRef.disabled=this._disabled}}]),t}()).\u0275fac=function(t){return new(t||Lt)(a.Nb(a.l),a.Nb(Gt,12),a.Nb(r.d),a.Nb(a.z),a.Nb(a.P),a.Nb(Zt),a.Nb(g.b,8),a.Nb(Wt),a.Nb(a.h))},Lt.\u0275dir=a.Ib({type:Lt,selectors:[["","cdkDrag",""]],contentQueries:function(t,e,i){var n;1&t&&(a.Gb(i,qt,!0),a.Gb(i,Ht,!0),a.Gb(i,Bt,!0)),2&t&&(a.ic(n=a.bc())&&(e._previewTemplate=n.first),a.ic(n=a.bc())&&(e._placeholderTemplate=n.first),a.ic(n=a.bc())&&(e._handles=n))},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(t,e){2&t&&a.Eb("cdk-drag-disabled",e.disabled)("cdk-drag-dragging",e._dragRef.isDragging())},inputs:{dragStartDelay:["cdkDragStartDelay","dragStartDelay"],disabled:["cdkDragDisabled","disabled"],data:["cdkDragData","data"],lockAxis:["cdkDragLockAxis","lockAxis"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],boundaryElement:["cdkDragBoundary","boundaryElement"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[a.Bb([{provide:zt,useExisting:Lt}]),a.Ab()]}),Lt);function Ut(t,e){for(var i=t.parentElement;i;){if(i.matches?i.matches(e):i.msMatchesSelector(e))return i;i=i.parentElement}return null}var Yt,Kt,Jt=((Kt=function t(){_classCallCheck(this,t)}).\u0275mod=a.Lb({type:Kt}),Kt.\u0275inj=a.Kb({factory:function(t){return new(t||Kt)},providers:[Wt]}),Kt),Xt=((Yt=function(){function t(e,i){_classCallCheck(this,t),this.wall=e,this.dialog=i}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"handleDragStart",value:function(t){this.dragging=!0}},{key:"openPost",value:function(){var t=this;this.dragging?this.dragging=!1:this.dialog.open(U,{width:"300px",data:{title:this.post.title,author:this.post.author,contents:this.post.contents,boardId:this.post.boardId}}).afterClosed().subscribe((function(e){e&&(t.board.posts[t.idx]=e,t.wall.updatePosts(t.board.id,t.board.posts))}))}}]),t}()).\u0275fac=function(t){return new(t||Yt)(a.Nb(u),a.Nb(B))},Yt.\u0275cmp=a.Hb({type:Yt,selectors:[["app-board-post"]],inputs:{post:"post",board:"board",idx:"idx"},decls:8,vars:3,consts:[["cdkDrag","","cdkDragBoundary",".board",1,"new-post",3,"cdkDragStarted","click"],[1,"post-contents"],[1,"subtitle"]],template:function(t,e){1&t&&(a.Sb(0,"div",0),a.ac("cdkDragStarted",(function(t){return e.handleDragStart(t)}))("click",(function(t){return e.openPost()})),a.Sb(1,"div",1),a.Sb(2,"h2"),a.sc(3),a.Rb(),a.Sb(4,"p",2),a.sc(5),a.Rb(),a.Sb(6,"p"),a.sc(7),a.Rb(),a.Rb(),a.Rb()),2&t&&(a.Cb(3),a.tc(e.post.title),a.Cb(2),a.uc("By: ",e.post.author,""),a.Cb(2),a.tc(e.post.contents))},directives:[Vt],styles:[".new-post[_ngcontent-%COMP%]{border-style:dotted;width:150px;height:100%}"]}),Yt);function $t(t,e){if(1&t&&a.Ob(0,"app-board-post",4),2&t){var i=e.$implicit,n=e.index,r=a.cc().ngIf;a.hc("post",i)("board",r)("idx",n)}}function Qt(t,e){if(1&t){var i=a.Tb();a.Sb(0,"main"),a.Sb(1,"div",1),a.qc(2,$t,1,3,"app-board-post",2),a.Rb(),a.Sb(3,"button",3),a.ac("click",(function(t){return a.kc(i),a.cc().newPost()})),a.sc(4,"Create a Post"),a.Rb(),a.Rb()}if(2&t){var n=e.ngIf;a.Cb(2),a.hc("ngForOf",n.posts)}}var te,ee=((te=function(){function t(e,i){_classCallCheck(this,t),this.wallService=e,this.dialog=i,this.posts=[]}return _createClass(t,[{key:"ngOnInit",value:function(){this.board$=this.wallService.getBoard(this.boardId)}},{key:"newPost",value:function(){var t=this;this.dialog.open(U,{width:"500px",data:{boardId:this.boardId}}).afterClosed().subscribe((function(e){e&&t.wallService.addPost(Object.assign({},e))}))}}]),t}()).\u0275fac=function(t){return new(t||te)(a.Nb(u),a.Nb(B))},te.\u0275cmp=a.Hb({type:te,selectors:[["app-board"]],inputs:{boardId:"boardId"},decls:2,vars:3,consts:[[4,"ngIf"],[1,"board"],[3,"post","board","idx",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"click"],[3,"post","board","idx"]],template:function(t,e){1&t&&(a.qc(0,Qt,5,1,"main",0),a.dc(1,"async")),2&t&&a.hc("ngIf",a.ec(1,1,e.board$))},directives:[r.k,r.j,V.b,Xt],pipes:[r.b],styles:["main[_ngcontent-%COMP%]{-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.board[_ngcontent-%COMP%], main[_ngcontent-%COMP%]{display:-webkit-box;display:flex}.board[_ngcontent-%COMP%]{flex-wrap:wrap;border-style:solid;width:90vw;height:85vh;margin:auto}app-board-post[_ngcontent-%COMP%]{height:200px}"]}),te);function ie(t,e){if(1&t&&(a.Sb(0,"div",2),a.Ob(1,"app-board",3),a.Rb()),2&t){var i=e.$implicit;a.Cb(1),a.hc("boardId",i.id)}}function ne(t,e){if(1&t&&(a.Sb(0,"main"),a.qc(1,ie,2,1,"div",1),a.dc(2,"async"),a.Rb()),2&t){var i=a.cc();a.Cb(1),a.hc("ngForOf",a.ec(2,1,i.boards$))}}var re,oe,ae=[{path:"",component:(re=function(){function t(e,i){_classCallCheck(this,t),this.wall=e,this.auth=i}return _createClass(t,[{key:"ngOnInit",value:function(){this.boards$=this.wall.getBoards()}}]),t}(),re.\u0275fac=function(t){return new(t||re)(a.Nb(u),a.Nb(d.a))},re.\u0275cmp=a.Hb({type:re,selectors:[["app-wall"]],decls:2,vars:3,consts:[[4,"ngIf"],["class","board",4,"ngFor","ngForOf"],[1,"board"],[3,"boardId"]],template:function(t,e){1&t&&(a.qc(0,ne,3,3,"main",0),a.dc(1,"async")),2&t&&a.hc("ngIf",a.ec(1,1,e.auth.user$))},directives:[r.k,r.j,ee],pipes:[r.b],styles:[".new-post[_ngcontent-%COMP%]{margin:5%}"]}),re)}],se=((oe=function t(){_classCallCheck(this,t)}).\u0275mod=a.Lb({type:oe}),oe.\u0275inj=a.Kb({factory:function(t){return new(t||oe)},imports:[[o.c.forChild(ae)],o.c]}),oe),le=i("PCNd");i.d(e,"WallModule",(function(){return he}));var ce,he=((ce=function t(){_classCallCheck(this,t)}).\u0275mod=a.Lb({type:ce}),ce.\u0275inj=a.Kb({factory:function(t){return new(t||ce)},imports:[[r.c,se,le.a,Jt,H,q.j]]}),ce)}}]);